<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="author" content="Untree.co">
    <link rel="shortcut icon" href="/images/JN_favicon.png">

    <meta name="description" content=""/>
    <meta name="keywords" content="bootstrap, bootstrap4"/>

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;700&family=Source+Serif+Pro:wght@400;700&display=swap"
          rel="stylesheet">

    <link rel="stylesheet" href="/css/bootstrap.min.css">
    <link rel="stylesheet" href="/css/owl.carousel.min.css">
    <link rel="stylesheet" href="/css/owl.theme.default.min.css">
    <link rel="stylesheet" href="/css/jquery.fancybox.min.css">
    <link rel="stylesheet" href="/fonts/icomoon/style.css">
    <link rel="stylesheet" href="/css/flaticon.css">
    <link rel="stylesheet" href="/css/daterangepicker.css">
    <link rel="stylesheet" href="/css/aos.css">
    <link rel="stylesheet" href="/css/style.css">
    <script src="https://code.iconify.design/iconify-icon/1.0.7/iconify-icon.min.js"></script>

    <style>
        /* 상세 페이지 특정 스타일 */
        /* 이 컨테이너는 이제 지도와 정보를 포함하는 두 개의 컬럼을 가질 것 */
        .detail-main-content {
            display: flex; /* 지도와 정보 영역을 가로로 정렬 */
            flex-wrap: wrap; /* 작은 화면에서 줄바꿈 허용 */
            gap: 30px; /* 컬럼 사이 간격 */
            justify-content: center; /* 전체 콘텐츠 가운데 정렬 */
            align-items: flex-start; /* 상단 정렬 */
            padding: 40px 0;
        }

        /* 좌측 지도 영역 */
        .map-container-col {
            flex: 1 1 50%; /* flex grow, shrink, basis (대략 50% 너비) */
            max-width: 50%; /* 최대 너비 설정 */
            min-width: 300px; /* 최소 너비 (모바일에서 꽉 차도록) */
            height: 500px; /* 지도 영역 높이 고정 (조정 필요) */
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
            border-radius: 10px;
            overflow: hidden; /* 지도가 넘치지 않도록 */
        }

        .map-placeholder {
            width: 100%;
            height: 100%;
            background-color: #e0e0e0;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 2.5em;
            color: #666;
        }

        /* 우측 정보 영역 (포스터와 상세 정보 포함) */
        .info-poster-container-col {
            flex: 1 1 45%; /* flex grow, shrink, basis (대략 45% 너비) */
            max-width: 45%; /* 최대 너비 설정 */
            min-width: 300px; /* 최소 너비 */
            display: flex;
            flex-direction: column; /* 포스터와 정보를 세로로 쌓음 */
            align-items: center; /* 내부 요소 가운데 정렬 */
            text-align: center;
        }

        .poster-area {
            width: 80%; /* 정보 컨테이너 내에서 포스터 너비 조정 */
            max-width: 300px; /* 포스터 최대 너비 */
            margin-bottom: 20px; /* 포스터 아래 여백 */
        }

        .poster-area img {
            width: 100%;
            height: auto;
            border-radius: 10px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
            aspect-ratio: 2.5 / 4; /* 포스터 비율 유지 */
            object-fit: cover;
            display: block;
        }

        .info-area {
            width: 100%; /* 정보 영역은 부모 너비에 맞춤 */
            text-align: center;
        }

        .info-area h1 {
            font-size: 2.5rem;
            margin-bottom: 15px;
            color: #333;
        }

        .info-area p {
            font-size: 1.1rem;
            line-height: 1.6;
            color: #555;
            margin-bottom: 10px;
        }

        .info-area strong {
            color: #000;
        }

        /* 목록으로 돌아가기 버튼 */
        .back-button-container {
            margin-top: 30px;
        }

        /* 반응형 디자인 */
        @media (max-width: 992px) {
            /* 태블릿 및 모바일 */
            .detail-main-content {
                flex-direction: column; /* 세로로 쌓이도록 변경 */
                align-items: center; /* 가운데 정렬 */
                gap: 20px;
            }

            .map-container-col,
            .info-poster-container-col {
                width: 90%; /* 화면 꽉 채우도록 */
                max-width: 600px; /* 너무 커지지 않도록 최대 너비 설정 */
                min-width: auto;
                height: 350px; /* 모바일에서 지도 높이 조정 */
            }

            .info-poster-container-col {
                height: auto; /* 정보 영역 높이 자동 */
            }

            .info-area h1 {
                font-size: 2rem;
            }

            .info-area p {
                font-size: 1rem;
            }
        }


        /*소연추가 css*/
        .nav-tabs {
            border-bottom: 2px solid #f2f2f2;
            justify-content: space-around;
        }

        .nav-tabs .nav-link {
            border: none !important;
            outline: none !important;
            box-shadow: none !important;
            background: none;
            font-size: 1.1rem;
            color: #888;
            font-weight: 600;
            padding: 1rem;
            position: relative;
            transition: color 0.3s ease;
        }

        .nav-tabs .nav-link:hover {
            color: #ff6f00;
        }

        .nav-tabs .nav-link.active {
            color: #ff6f00;
        }

        .nav-tabs .nav-link.active::after {
            content: "";
            position: absolute;
            left: 20%;
            bottom: 0;
            width: 60%;
            height: 3px;
            background: linear-gradient(to right, #ff6f00, #ffa040);
            border-radius: 2px;
        }

        .nav-tabs .nav-link:focus {
            box-shadow: none !important;
            outline: none !important;
        }
        #favoriteTabsContent {
            height: 600px; /* 지도와 맞추기 */
            overflow-y: auto;
        }


        .card {
            transition: background-color 0.3s ease, box-shadow 0.3s ease, transform 0.3s ease;
        }

        .card:hover {
            background-color: rgba(250, 228, 188, 0.22); /* 아주 연한 회색 톤 */
            box-shadow: 0 6px 12px rgba(0, 0, 0, 0.1);

        }






    </style>



    <title>전남와따 - 테마여행</title>
</head>

<body>

<div class="site-mobile-menu site-navbar-target">
    <div class="site-mobile-menu-header">
        <div class="site-mobile-menu-close">
            <span class="icofont-close js-menu-toggle"></span>
        </div>
    </div>
    <div class="site-mobile-menu-body"></div>
</div>

<nav class="site-nav">
    <div class="container">
        <div class="site-navigation">
            <a href="/user/index" class="logo m-0">
                <img src="/images/JN_logo_nobg.png" alt="전남와따 로고" style="height: 4rem;">
            </a>

            <ul class="js-clone-nav d-none d-lg-inline-block text-left site-menu float-right">
                <li class="active"><a href="/user/index">홈</a></li>
                <li><a href="/movie">미디어 여행</a></li>
                <li><a href="/favorite/">테마 여행</a></li>
                <li><a href="/gpt/view">AI 추천 여행</a></li>
                <li><a href="/products/page">전남 먹거리</a></li>

                <!-- 로그인 여부에 따라 조건 분기 -->
                <li th:if="${session.email != null}">
                    <a href="/user/myPage">마이페이지</a>
                </li>

                <!-- 로그인 여부에 따라 조건 분기 -->
                <li th:if="${session.email == null}">
                    <a href="/user/login">로그인</a>
                </li>
                <li th:if="${session.email != null}">
                    <a href="/user/logout">로그아웃</a>
                </li>

            </ul>

            <a href="#"
               class="burger ml-auto float-right site-menu-toggle js-menu-toggle d-inline-block d-lg-none light"
               data-toggle="collapse" data-target="#main-navbar">
                <span></span>
            </a>

        </div>
    </div>
</nav>

<div class="hero hero-inner">
    <div class="container">
        <div class="row align-items-center">
            <div class="col-lg-6 mx-auto text-center">
                <div class="intro-wrap">
                    <h1 class="mb-0" id="detail-page-title">테마 여행</h1>
                </div>
            </div>
        </div>
    </div>
</div>

<div class="untree_co-section">
    <div class="container">
        <div class="row justify-content-center">
            <div class="col-lg-12">
                <div class="row">

                    <!-- 🗺️ Left: Map -->
                    <div class="col-lg-6 mb-4" >
                        <div id="map-area"
                             data-latitude="34.62939"
                             data-longitude="126.90022"
                             style="width:100%;height:670px; border-radius:10px;">
                        </div>
                    </div>

                    <!-- 🗂️ Right: Tabs + Content -->
                    <div class="col-lg-6">
                        <!-- ✅ Tab buttons -->
                        <ul class="nav nav-tabs mb-3" id="favoriteTabs" role="tablist">
                            <li class="nav-item" role="presentation">
                                <button class="nav-link active" id="media-tab" data-bs-toggle="tab"
                                        data-bs-target="#media" type="button" role="tab" aria-controls="media"
                                        aria-selected="true">저장한 미디어</button>
                            </li>
                            <li class="nav-item" role="presentation">
                                <button class="nav-link" id="course-tab" data-bs-toggle="tab"
                                        data-bs-target="#course" type="button" role="tab" aria-controls="course"
                                        aria-selected="false">저장한 관광지</button>
                            </li>
                            <li class="nav-item" role="presentation">
                                <button class="nav-link" id="search-tab" data-bs-toggle="tab"
                                        data-bs-target="#search" type="button" role="tab" aria-controls="search"
                                        aria-selected="false">관광지 검색</button>
                            </li>
                            <li class="nav-item" role="presentation">
                                <button class="nav-link" id="nearby-tab" data-bs-toggle="tab"
                                        data-bs-target="#nearby" type="button" role="tab" aria-controls="nearby"
                                        aria-selected="false">내 여정 주변 추천 관광지</button>
                            </li>
                        </ul>

                        <!-- ✅ Tab content -->
                        <div class="tab-content" id="favoriteTabsContent" style="height: 600px; overflow-y: auto;">

                            <!-- 🎬 미디어 탭 -->
                            <div class="tab-pane fade show active" id="media" role="tabpanel" aria-labelledby="media-tab">
                                <div th:each="fav : ${movieFavorites}" class="mb-3">
                                    <div class="card shadow-sm">
                                        <div class="row no-gutters">
                                            <!-- 포스터 이미지 (있을 때만 표시) -->
                                            <div th:if="${fav.posterUrl != null and fav.posterUrl != ''}" class="col-md-4">
                                                <img th:src="${fav.posterUrl}" class="img-fluid rounded-start" th:alt="${fav.name}">
                                            </div>

                                            <!-- 텍스트 정보 영역 -->
                                            <div th:class="${fav.posterUrl != null and fav.posterUrl != ''} ? 'col-md-8' : 'col-12'">
                                                <div class="card-body">
                                                    <h5 class="card-title" th:text="${fav.name}">미디어 이름</h5>
<!--                                                    <p class="card-subtitle mb-2 text-muted" th:text="'유형: ' + ${fav.type}">유형</p>-->
                                                    <p class="card-subtitle mb-2 text-muted">유형: 미디어</p>
                                                    <p class="card-text" th:text="'지역: ' + ${fav.location}">지역</p>
                                                    <p class="card-text" th:text="'주소: ' + ${fav.addr}">위치</p>
                                                    <p th:if="${fav.planPhone != ''}" class="card-text"
                                                       th:text="'전화: ' + ${fav.planPhone}"></p>
                                                    <p th:if="${fav.planHomepage != ''}" class="card-text">
                                                        <a th:href="${fav.planHomepage}" target="_blank">홈페이지 방문</a>
                                                    </p>
                                                    <p th:if="${fav.planContents != ''}" class="card-text"
                                                       th:utext="${#strings.replace(#strings.replace(#strings.replace(#strings.replace(fav.planContents, '\n', '<br/>'), '&', '&amp;'), '<', '&lt;'), '■', '<br/><strong>■</strong>')}">
                                                    </p>
                                                    <div class="text-end mt-2">
                                                        <button class="btn btn-sm btn-outline-secondary move-to-map-btn me-2"
                                                                th:data-name="${fav.name}"
                                                                th:data-addr="${fav.addr}"
                                                                th:data-x="${fav.x}"
                                                                th:data-y="${fav.y}">
                                                            지도로 이동
                                                        </button>

                                                        <button class="btn btn-sm btn-outline-danger delete-favorite-btn"
                                                                th:data-type="${fav.type}"
                                                                th:data-name="${fav.name}"
                                                                th:data-addr="${fav.addr}">
                                                            삭제
                                                        </button>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>


                            <!-- 🏞️ 여행 장소 탭 -->
                            <div class="tab-pane fade" id="course" role="tabpanel" aria-labelledby="course-tab">
                                <div th:each="fav : ${courseFavorites}" class="mb-3">
                                    <div class="card shadow-sm">
                                        <div class="card-body">
                                            <h5 class="card-title" th:text="${fav.name}">여행지 이름</h5>
<!--                                            <p class="card-subtitle mb-2 text-muted" th:text="'유형: ' + ${fav.type}">유형</p>-->
                                            <p class="card-subtitle mb-2 text-muted">유형: 관광지</p>
                                            <p class="card-text" th:text="'지역: ' + ${fav.location}">지역</p>
                                            <p class="card-text" th:text="'주소: ' + ${fav.addr}">위치</p>
                                            <p th:if="${fav.planPhone != ''}" class="card-text"
                                               th:text="'전화: ' + ${fav.planPhone}"></p>
                                            <p th:if="${fav.planHomepage != ''}" class="card-text">
                                                <a th:href="${fav.planHomepage}" target="_blank">홈페이지 방문</a>
                                            </p>
                                            <p th:if="${fav.planContents != ''}" class="card-text"
                                               th:utext="${#strings.replace(
                                                    #strings.replace(
                                                      #strings.replace(
                                                        #strings.replace(
                                                          #strings.replace(
                                                            fav.planContents, '\n', '<br/>'),
                                                          '&', '&amp;'),
                                                        '<', '&lt;'),
                                                      '■', '<br/><strong>■</strong>'),
                                                    '●', '<br/><strong>●</strong>')}">
                                            </p>
                                            <div class="text-end mt-2">
                                                <button class="btn btn-sm btn-outline-secondary move-to-map-btn me-2"
                                                        th:data-name="${fav.name}"
                                                        th:data-addr="${fav.addr}"
                                                        th:data-x="${fav.x}"
                                                        th:data-y="${fav.y}">
                                                    지도로 이동
                                                </button>

                                                <button class="btn btn-sm btn-outline-danger delete-favorite-btn"
                                                        th:data-type="${fav.type}"
                                                        th:data-name="${fav.name}"
                                                        th:data-addr="${fav.addr}">
                                                    삭제
                                                </button>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>


                            <!-- 🔍 관광지 검색 탭 -->
                            <div class="tab-pane fade" id="search" role="tabpanel" aria-labelledby="search-tab">
                                <div class="w-100 d-flex flex-column align-items-center gap-3">

                                    <!-- 검색 카드 -->
                                    <div class="card shadow-sm mb-3" style="width: 100%; max-width: 600px;">
                                        <div class="card-body">
                                            <h5 class="card-title">관광지 검색</h5>
                                            <p class="card-text text-muted mb-3">
                                                관광지 이름 또는 주소를 입력하여<br>
                                                원하는 위치를 검색할 수 있습니다.
                                            </p>
                                            <form id="searchForm">
                                                <div class="d-flex flex-column gap-2">
                                                    <input type="text" name="tourName" id="tourName"
                                                           class="form-control"
                                                           placeholder="예: 백련사" />
                                                    <button type="button" class="btn btn-outline-warning mt-2" id="searchTourBtn">검색</button>
                                                </div>
                                            </form>
                                        </div>
                                    </div>

                                    <!-- 검색 결과 카드 -->
                                    <div class="card shadow-sm" id="searchResultCard" style="display: none; width: 100%; max-width: 600px;">
                                        <div class="card-body">
                                            <h5 class="card-title">검색 결과</h5>
                                            <div id="searchResultList" class="d-flex flex-column gap-3">
                                                <!-- Search results will be injected here -->
                                            </div>
                                        </div>
                                    </div>

                                </div>
                            </div>

                            <div class="tab-pane fade" id="nearby" role="tabpanel" aria-labelledby="nearby-tab">
                                <div id="nearby-result" class="mb-3">
                                    <!-- JS will insert content here -->
                                    <p>주변 관광지를 불러오는 중입니다...</p>
                                </div>
                            </div>

                        </div> <!-- tab-content -->
                    </div> <!-- col-lg-6 -->
                </div> <!-- inner row -->
            </div>
        </div>
    </div>
</div>



<div class="site-footer">
    <div class="inner first">
        <div class="container">
            <div class="row">
                <div class="col-md-6 col-lg-6">
                    <div class="widget">
                        <h3 class="heading">서비스 안내</h3>
                        <p>이 서비스는 2025년 전라남도 공공ᆞ빅데이터 활용 아이디어 공모전 출품작입니다.<br>
                            전라남도의 방대한 공공 데이터와 빅데이터를 창의적으로 활용하여,
                            여행자들에게 더욱 풍부하고 개인화된 경험을 제공하고자 기획되었습니다.
                            남도의 숨겨진 매력을 발견하고, 특별한 추억을 만들어 갈 수 있도록
                            최적의 정보를 제공하는 데 초점을 맞추고 있습니다.
                            <br>지금 바로 전라남도의 매력을 직접 경험해보세요!</p>
                    </div>
                </div>
                <div class="col-md-7 col-lg-2 pl-lg-5">
                    <div class="widget">
                        <h3 class="heading">Pages</h3>
                        <ul class="links list-unstyled">
                            <li><a href="#">미디어 여행</a></li>
                            <li><a href="#">테마 여행</a></li>
                            <li><a href="#">AI 추천 여행</a></li>
                            <li><a href="#">전남 먹거리</a></li>
                        </ul>
                    </div>
                </div>
                <div class="col-md-6 col-lg-4">
                    <div class="widget">
                        <h3 class="heading">Contact</h3>
                        <ul class="list-unstyled quick-info links">
                            <li class="email"><a href="#">poly@example.com</a></li>
                            <li class="phone"><a href="#">+82 02-2186-5800</a></li>
                            <li class="address"><a href="#">서울특별시 강서구 화곡동 우장산로10길 112</a></li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="inner dark">
        <div class="container">
            <div class="row text-center">
                <div class="col-md-8 mb-3 mb-md-0 mx-auto">
                    <p>Copyright &copy;<script>document.write(new Date().getFullYear());</script>
                        . All Rights Reserved. &mdash; Designed with love by Team 아따
                    </p>
                </div>
            </div>
        </div>
    </div>
</div>

<script src="/js/jquery-3.4.1.min.js"></script>
<script src="/js/popper.min.js"></script>
<script src="/js/bootstrap.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
<script src="/js/owl.carousel.min.js"></script>
<script src="/js/jquery.animateNumber.min.js"></script>
<script src="/js/jquery.waypoints.min.js"></script>
<script src="/js/jquery.fancybox.min.js"></script>
<script src="/js/aos.js"></script>
<script src="/js/moment.min.js"></script>
<script src="/js/daterangepicker.js"></script>
<script src="/js/typed.js"></script>
<script src="/js/custom.js"></script>
<script type="text/javascript" src="/js/jquery.serializeObject.min.js"></script>


<!-- 지도 -->
<!-- 1. Kakao SDK (autoload=false 설정) -->
<!-- Kakao SDK - autoload false -->
<script src="//dapi.kakao.com/v2/maps/sdk.js?appkey=15f402ba36aeaab14a6b06f5dd3f796e&autoload=false&libraries=services"></script>


<!-- 2. 지도 초기화 함수 포함된 스크립트 -->
<script type="text/javascript" src="/js/favoriteTest-listAll.js"></script>

<script th:inline="javascript">
    const favoriteList = /*[[${favoriteList}]]*/ [];
</script>

<!-- 3. Kakao SDK가 로드되면 initMap 실행 -->
<script>
    window.onload = function () {
        if (typeof kakao !== 'undefined' && kakao.maps && kakao.maps.load) {
            kakao.maps.load(function () {
                if (typeof initMap === 'function') {
                    initMap();
                } else {
                    console.error("❌ initMap 함수가 없습니다.");
                }
            });
        } else {
            console.error("❌ Kakao 지도 SDK가 로드되지 않았습니다.");
        }
    };
</script>


</body>
</html>