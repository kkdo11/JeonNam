<!doctype html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>Ï†ÑÎÇ® Î®πÍ±∞Î¶¨</title>

    <link rel="shortcut icon" href="/images/JN_favicon.png">
    <link rel="stylesheet" href="/css/bootstrap.min.css">
    <link rel="stylesheet" href="/css/owl.carousel.min.css">
    <link rel="stylesheet" href="/css/owl.theme.default.min.css">
    <link rel="stylesheet" href="/css/jquery.fancybox.min.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;700&family=Source+Serif+Pro:wght@400;700&display=swap"
          rel="stylesheet">
    <link rel="stylesheet" href="/fonts/icomoon/style.css">
    <link rel="stylesheet" href="/css/flaticon.css">
    <link rel="stylesheet" href="/css/daterangepicker.css">
    <link rel="stylesheet" href="/css/aos.css">
    <link rel="stylesheet" href="/css/style.css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" />
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://code.iconify.design/iconify-icon/1.0.7/iconify-icon.min.js"></script>

    <style>
        body {
            background: #f8f9fa;
            font-family: 'Inter', sans-serif;
        }


        h1, h2, h3 {
            font-family: 'Source Serif Pro', serif;
        }

        #productCardList {
            display: flex;
            flex-wrap: wrap;
            gap: 24px;
            justify-content: center;
        }

        .product-item {
            width: 180px;
            border-radius: 20px;
            background: linear-gradient(180deg, #ffffff 0%, #fffaf0 100%);
            box-shadow: 0 4px 12px rgba(0,0,0,0.05);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            overflow: hidden;
            text-align: center;
        }

        .product-item:hover {
            transform: translateY(-6px);
            box-shadow: 0 10px 20px rgba(0,0,0,0.1);
        }

        .product-inner {
            padding: 1rem;
        }

        .product-img {
            width: 100%;
            height: 140px;
            object-fit: cover;
            border-bottom: 1px solid #f3f3f3;
        }

        .product-name {
            font-weight: 600;
            /*font-size: 1.05rem;*/
            color: #222;
            margin-top: 0.5rem;
        }

        .product-area {
            font-size: 0.9rem;
            color: #555;
        }

        .modal-dialog.modal-centered-custom {
            max-width: 720px;
        }

        .modal-content {
            border-radius: 16px;
            padding: 1rem;
            box-shadow: 0 6px 30px rgba(0, 0, 0, 0.2);
            border: none;
        }

        .custom-modal-header {
            background-color: #fffaf0;
            border-bottom: 1px solid #f3e4c0;
            padding: 1rem 1.5rem;
            border-top-left-radius: 16px;
            border-top-right-radius: 16px;
        }

        .custom-modal-header .modal-title {
            font-size: 1.3rem;
            font-weight: 700;
            color: #333;
            display: flex;
            align-items: center;
        }

        .custom-close {
            transition: transform 0.2s ease;
        }

        .custom-close:hover {
            transform: rotate(90deg) scale(1.2);
        }

        .modal-body {
            background: #fffefc;
            border-radius: 16px;
            padding: 2.5rem 2rem;
            box-shadow: inset 0 0 0 1px #f1f1f1;
            text-align: center;
            font-family: 'Pretendard', sans-serif;
        }

        #modalImage {
            width: 280px;
            height: 280px;
            border-radius: 16px;
            object-fit: cover;
            box-shadow: 0 6px 20px rgba(0, 0, 0, 0.1);
            margin-bottom: 2rem;
            transition: transform 0.3s;
        }

        #modalImage:hover {
            transform: scale(1.02);
        }

        .modal-text {
            width: 100%;
            max-width: 640px;
            margin: 0 auto;
            font-family: 'Pretendard', sans-serif;
            text-align: left;
        }

        .modal-text h4 {
            font-size: 1.8rem;
            font-weight: 700;
            margin-bottom: 1.2rem;
            color: #222;
            text-align: center;
        }

        .modal-text p {
            font-size: 1rem;
            line-height: 1.75;
            color: #444;
            margin-bottom: 1rem;
        }

        .modal-text p strong {
            display: block;
            margin-top: 1rem;
            margin-bottom: 0.4rem;
            font-weight: bold;
            color: #f3a600;
        }

        .modal-text .info-label {
            font-size: 1.05rem;
            font-weight: 700;
            color: #f3a600;
            margin-top: 1.5rem;
            margin-bottom: 0.3rem;
            display: block;
        }

        .modal-text .info-value {
            font-weight: 500;
            color: #555;
            margin-bottom: 1rem;
        }

        input:focus,
        .form-control:focus {
            border-color: #f3a600 !important;
            box-shadow: 0 0 0 0.2rem rgba(243, 166, 0, 0.25);
            outline: none;
        }
        .untree_co-section {
            background: white;
            padding: 70px 0;
        }



    </style>

</head>
<body>
<!-- ‚úÖ ÎÑ§ÎπÑÍ≤åÏù¥ÏÖò Î∞î -->
<nav class="site-nav">
    <div class="container">
        <div class="site-navigation">
            <a href="/user/index" class="logo m-0">
                <img src="/images/JN_logo_nobg.png" alt="Ï†ÑÎÇ®ÏôÄÎî∞ Î°úÍ≥†" style="height: 4rem;">
            </a>

            <ul class="js-clone-nav d-none d-lg-inline-block text-left site-menu float-right">
                <li class="active"><a href="/user/index">Ìôà</a></li>
                <li><a href="/movie">ÎØ∏ÎîîÏñ¥ Ïó¨Ìñâ</a></li>
                <li><a href="/favorite/testAllList">ÌÖåÎßà Ïó¨Ìñâ</a></li>
                <li><a href="contact.html">AI Ï∂îÏ≤ú Ïó¨Ìñâ</a></li>
                <li><a href="/products/page">Ï†ÑÎÇ® Î®πÍ±∞Î¶¨</a></li>
                <li th:if="${session.email == null}"><a href="/user/login">Î°úÍ∑∏Ïù∏</a></li>
                <li th:if="${session.email != null}"><a href="/user/logout">Î°úÍ∑∏ÏïÑÏõÉ</a></li>
            </ul>

            <a href="#" class="burger ml-auto float-right site-menu-toggle js-menu-toggle d-inline-block d-lg-none light">
                <span></span>
            </a>
        </div>
    </div>
</nav>

<!-- ‚úÖ Hero ÏòÅÏó≠ -->
<div class="hero hero-inner">
    <div class="container">
        <div class="row align-items-center">
            <div class="col-lg-6 mx-auto text-center">
                <div class="intro-wrap">
                    <h1 class="mb-0">Ï†ÑÎÇ® Î®πÍ±∞Î¶¨</h1>
                </div>
            </div>
        </div>
    </div>
</div>
<div class="untree_co-section">
<div class="container" >
    <!-- üîç Í≤ÄÏÉâ Ìèº -->
    <div class="card p-4 shadow-sm border-0 mb-4" style="border-radius: 1rem; background: #fffefc;">
        <form id="filterForm" class="row g-3 align-items-center justify-content-center">

            <!-- ÏßÄÏó≠ ÏûÖÎ†• -->
            <div class="col-md-3">
                <div class="input-group">
                    <span class="input-group-text bg-white border-end-0"><iconify-icon icon="mdi:map-marker-outline"></iconify-icon></span>
                    <input type="text" id="areaInput" class="form-control border-start-0" placeholder="ÏßÄÏó≠ (Ïòà: ÎÇòÏ£º)" />
                </div>
            </div>

            <!-- ÏÉÅÌíàÎ™Ö ÏûÖÎ†• -->
            <div class="col-md-3">
                <div class="input-group">
                    <span class="input-group-text bg-white border-end-0"><iconify-icon icon="mdi:shopping-outline"></iconify-icon></span>
                    <input type="text" id="searchInput" class="form-control border-start-0" placeholder="ÏÉÅÌíàÎ™Ö" />
                </div>
            </div>

            <!-- Í≤ÄÏÉâ Î≤ÑÌäº -->
            <div class="col-md-2">
                <button type="submit" class="btn w-100 fw-bold text-white" style="background-color: #f3a600; border-radius: 0.75rem;">
                    Í≤ÄÏÉâ
                </button>
            </div>

            <!-- Ï¥àÍ∏∞Ìôî Î≤ÑÌäº -->
            <div class="col-md-2">
                <button type="button" id="resetBtn" class="btn btn-outline-dark w-100" style="border-radius: 0.75rem;">
                    ‚Ü∫ Ï¥àÍ∏∞Ìôî
                </button>
            </div>

        </form>
    </div>

    <!--    <form id="filterForm" class="row g-2 mb-4 justify-content-center">-->
<!--        <div class="col-md-3">-->
<!--            <input type="text" id="areaInput" class="form-control" placeholder="ÏßÄÏó≠ (Ïòà: ÎÇòÏ£º)" />-->
<!--        </div>-->
<!--        <div class="col-md-3">-->
<!--            <input type="text" id="searchInput" class="form-control" placeholder="ÏÉÅÌíàÎ™Ö" />-->
<!--        </div>-->
<!--        <div class="col-md-2">-->
<!--            <button type="submit" class="btn btn-primary w-100">Í≤ÄÏÉâ</button>-->
<!--        </div>-->
<!--        <div class="col-md-2">-->
<!--            <button type="button" id="resetBtn" class="btn btn-secondary w-100">Ï¥àÍ∏∞Ìôî</button>-->
<!--        </div>-->
<!--    </form>-->

    <div id="productCardList">
        <!-- ÎèôÏ†Å ÏÇΩÏûÖ -->
    </div>
</div>
</div>
    <!--footer start-->
    <div class="site-footer">
        <div class="inner first">
            <div class="container">
                <div class="row">
                    <div class="col-md-6 col-lg-6">
                        <div class="widget">
                            <h3 class="heading">ÏÑúÎπÑÏä§ ÏïàÎÇ¥</h3>
                            <p>Ïù¥ ÏÑúÎπÑÏä§Îäî 2025ÎÖÑ Ï†ÑÎùºÎÇ®ÎèÑ Í≥µÍ≥µ·ÜûÎπÖÎç∞Ïù¥ÌÑ∞ ÌôúÏö© ÏïÑÏù¥ÎîîÏñ¥ Í≥µÎ™®Ï†Ñ Ï∂úÌíàÏûëÏûÖÎãàÎã§.<br>
                                Ï†ÑÎùºÎÇ®ÎèÑÏùò Î∞©ÎåÄÌïú Í≥µÍ≥µ Îç∞Ïù¥ÌÑ∞ÏôÄ ÎπÖÎç∞Ïù¥ÌÑ∞Î•º Ï∞ΩÏùòÏ†ÅÏúºÎ°ú ÌôúÏö©ÌïòÏó¨,
                                Ïó¨ÌñâÏûêÎì§ÏóêÍ≤å ÎçîÏö± ÌíçÎ∂ÄÌïòÍ≥† Í∞úÏù∏ÌôîÎêú Í≤ΩÌóòÏùÑ Ï†úÍ≥µÌïòÍ≥†Ïûê Í∏∞ÌöçÎêòÏóàÏäµÎãàÎã§.
                                ÎÇ®ÎèÑÏùò Ïà®Í≤®ÏßÑ Îß§Î†•ÏùÑ Î∞úÍ≤¨ÌïòÍ≥†, ÌäπÎ≥ÑÌïú Ï∂îÏñµÏùÑ ÎßåÎì§Ïñ¥ Í∞à Ïàò ÏûàÎèÑÎ°ù
                                ÏµúÏ†ÅÏùò Ï†ïÎ≥¥Î•º Ï†úÍ≥µÌïòÎäî Îç∞ Ï¥àÏ†êÏùÑ ÎßûÏ∂îÍ≥† ÏûàÏäµÎãàÎã§.
                                <br>ÏßÄÍ∏à Î∞îÎ°ú Ï†ÑÎùºÎÇ®ÎèÑÏùò Îß§Î†•ÏùÑ ÏßÅÏ†ë Í≤ΩÌóòÌï¥Î≥¥ÏÑ∏Ïöî!</p>
                        </div>
                    </div>
                    <div class="col-md-7 col-lg-2 pl-lg-5">
                        <div class="widget">
                            <h3 class="heading">Pages</h3>
                            <ul class="links list-unstyled">
                                <li><a href="#">ÎØ∏ÎîîÏñ¥ Ïó¨Ìñâ</a></li>
                                <li><a href="#">ÌÖåÎßà Ïó¨Ìñâ</a></li>
                                <li><a href="#">AI Ï∂îÏ≤ú Ïó¨Ìñâ</a></li>
                                <li><a href="#">Ï†ÑÎÇ® Î®πÍ±∞Î¶¨</a></li>
                            </ul>
                        </div>
                    </div>
                    <div class="col-md-6 col-lg-4">
                        <div class="widget">
                            <h3 class="heading">Contact</h3>
                            <ul class="list-unstyled quick-info links">
                                <li class="email"><a href="#">poly@example.com</a></li>
                                <li class="phone"><a href="#">+82 02-2186-5800</a></li>
                                <li class="address"><a href="#">ÏÑúÏö∏ÌäπÎ≥ÑÏãú Í∞ïÏÑúÍµ¨ ÌôîÍ≥°Îèô Ïö∞Ïû•ÏÇ∞Î°ú10Í∏∏ 112</a></li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="inner dark">
            <div class="container">
                <div class="row text-center">
                    <div class="col-md-8 mb-3 mb-md-0 mx-auto">
                        <p>Copyright &copy;<script>document.write(new Date().getFullYear());</script>. All Rights Reserved. &mdash; Designed with love by Team ÏïÑÎî∞
                        </p>
                    </div>

                </div>
            </div>
        </div>
    </div>
    <!--footer end-->
<!-- Î™®Îã¨ -->
<div class="modal fade" id="productModal" tabindex="-1" aria-labelledby="productModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-centered-custom modal-dialog-centered">
        <div class="modal-content">
            <div class="modal-header custom-modal-header">
                <div class="d-flex align-items-center w-100 justify-content-between">
                    <h5 class="modal-title mb-0">
                        <span class="me-2"></span> Ï†ÑÎÇ® Î®πÍ±∞Î¶¨ ÏÉÅÏÑ∏Ï†ïÎ≥¥
                    </h5>
                    <button type="button" class="btn-close custom-close" data-bs-dismiss="modal" aria-label="Îã´Í∏∞"></button>
                </div>
            </div>


            <!--            <div class="modal-header">-->
<!--                <h5 class="modal-title" id="productModalLabel">ÏÉÅÌíà ÏÉÅÏÑ∏Ï†ïÎ≥¥</h5>-->
<!--                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Îã´Í∏∞"></button>-->
<!--            </div>-->
            <div class="modal-body">
                <img id="modalImage" src="" alt="ÏÉÅÌíà Ïù¥ÎØ∏ÏßÄ" />
                <div class="modal-text">
                    <h4 id="modalName"></h4>
                    <p>
                        <strong>üìç Ïù¥ ÏÉÅÌíàÏùÄ</strong>
                        <span id="modalArea"></span>ÏóêÏÑú ÏûêÎûÄ ÏßÄÏó≠ ÌäπÏÇ∞Î¨ºÏù¥ÏóêÏöî.
                    </p>

                    <p>
                        <strong>‚ú® Ïñ¥Îñ§ ÌäπÏßïÏù¥ ÏûàÎÇòÏöî?</strong>
                        <span id="modalFeature"></span>
                    </p>

                    <p>
                        <strong>üí™ Ïö∞Î¶¨ Î™∏Ïóê Ïñ¥Îñ§ ÎèÑÏõÄÏù¥ ÎêòÎÇòÏöî?</strong>
                        <span id="modalBenefit"></span>
                    </p>


<!--                    <p><strong>ÏßÄÏó≠</strong> <span id="modalArea"></span></p>-->
<!--                    <p><strong>ÌäπÏßï</strong><span id="modalFeature"></span></p>-->
<!--                    <p><strong>Ìö®Îä•</strong><span id="modalBenefit"></span></p>-->
                </div>
            </div>
        </div>
    </div>
</div>
</div>


<script>
    $(function() {
        loadProducts();

        $('#filterForm').on('submit', function(e) {
            e.preventDefault();
            loadProducts($('#areaInput').val(), $('#searchInput').val());
        });

        $('#resetBtn').on('click', function() {
            $('#areaInput').val('');
            $('#searchInput').val('');
            loadProducts();
        });
    });

    function loadProducts(area = '', search = '') {
        $.ajax({
            url: '/products',
            method: 'GET',
            data: { area, search },
            success: function(data) {
                const container = $('#productCardList');
                container.empty();

                if (!data.length) {
                    container.append('<div class="text-center text-muted w-100">Í≤∞Í≥ºÍ∞Ä ÏóÜÏäµÎãàÎã§.</div>');
                    return;
                }

                data.forEach(item => {
                    const imgSrc = item.imageUrl || 'https://via.placeholder.com/120?text=No+Image';
                    const itemStr = encodeURIComponent(JSON.stringify(item));

                    const html = `
                    <div class="product-item" tabindex="0" data-item='${itemStr}'>
                        <div class="product-inner">
                            <img class="product-img" src="${imgSrc}" alt="${item.proName}" />
                            <div class="product-name" title="${item.proName}">${item.proName}</div>
                            <div class="product-area" title="${item.proArea}">${item.proArea}</div>
                        </div>
                    </div>`;
                    container.append(html);
                });

                $('.product-item').each(function() {
                    const $this = $(this);
                    const inner = $this.find('.product-inner');

                    $this.on('mousemove', function(e) {
                        const offset = $this.offset();
                        const width = $this.outerWidth();
                        const height = $this.outerHeight();
                        const x = e.pageX - offset.left;
                        const y = e.pageY - offset.top;
                        const dx = (x / width) - 0.5;
                        const dy = (y / height) - 0.5;
                        const rotateX = dy * 15;
                        const rotateY = dx * 15;
                        inner.css('transform', `rotateX(${-rotateX}deg) rotateY(${rotateY}deg)`);
                    });

                    $this.on('mouseleave', function() {
                        inner.css('transform', 'rotateX(0) rotateY(0)');
                    });

                    $this.on('click keypress', function(e) {
                        if (e.type === 'click' || (e.type === 'keypress' && (e.key === 'Enter' || e.key === ' '))) {
                            const item = JSON.parse(decodeURIComponent($this.attr('data-item')));
                            showModal(item);
                        }
                    });
                });
            },
            error: function() {
                alert('Îç∞Ïù¥ÌÑ∞Î•º Î∂àÎü¨Ïò§Îäî Ï§ë Ïò§Î•òÍ∞Ä Î∞úÏÉùÌñàÏäµÎãàÎã§.');
            }
        });
    }

    function showModal(item) {
        $('#modalImage').attr('src', item.imageUrl || 'https://via.placeholder.com/400x250?text=No+Image');
        $('#modalName').text(item.proName);
        $('#modalArea').text(item.proArea);
        $('#modalFeature').html((item.proFeature || 'Ï†ïÎ≥¥ ÏóÜÏùå').replace(/\n/g, '<br>'));
        $('#modalBenefit').html((item.proBenefit || 'Ï†ïÎ≥¥ ÏóÜÏùå').replace(/\n/g, '<br>'));

        const modal = new bootstrap.Modal(document.getElementById('productModal'));
        modal.show();
    }
</script>

</body>
</html>
